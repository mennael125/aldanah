{% set important_links = theme.settings.get('important_links') %}

<header class="store-header">
  <div id="mainnav" class="main-nav-container bg-white flex items-center">
    <div class="inner bg-inherit w-full px-4 py-[18px] lg:p-6">
      <div class="container w-full p-0">
        <div class="flex items-center justify-between relative lg:hidden">
          <div class="flex items-center gap-3">
            <a
              class="mburger mburger--collapse leading-none"
              href="#mobile-menu"
              aria-label="Open-menu"
            >
              <i class="sicon-menu text-primary text-2xl"></i>
            </a>

            <button
              class="header-btn flex items-center bg-transparent p-0"
              type="button"
              aria-label="localization"
              onclick="salla.event.dispatch('localization::open')"
            >
              <i class="header-btn__icon sicon-language text-base"></i>
            </button>
          </div>

          <div class="flex items-center justify-center flex-1">
            <a class="navbar-brand mx-auto" href="{{ store.url }}">
              <img
                fetchpriority="high"
                width="100%"
                height="100%"
                loading="eager"
                src="{{ store.logo }}"
                alt="{{ store.name }} logo"
                class="max-h-10"
              />
              {% if is_page('index') %}
              <h1 class="sr-only">{{ store.name }}</h1>
              {% else %}
              <h2 class="sr-only">{{ store.name }}</h2>
              {% endif %}
            </a>
          </div>

          <div class="flex items-center gap-3">
            {% if user.type == 'user' %}
            <salla-user-menu avatar-only show-header></salla-user-menu>
            {% else %}
            <button
              class="header-btn flex items-center bg-transparent p-0"
              aria-label="user-icon"
              type="button"
              onclick="salla.event.dispatch('login::open')"
            >
              <i class="header-btn__icon sicon-user-circle text-base"></i>
            </button>
            {% endif %}

            <salla-cart-summary class="flex items-center">
              <i
                slot="icon"
                class="header-btn__icon sicon-shopping-bag text-base"
              ></i>
            </salla-cart-summary>
          </div>
        </div>

        <div class="hidden lg:flex items-center justify-between relative">
          <div class="flex items-center">
            <custom-main-menu></custom-main-menu>
          </div>

          <div class="flex items-center justify-center flex-1">
            <a class="navbar-brand" href="{{ store.url }}">
              <img
                fetchpriority="high"
                width="100%"
                height="100%"
                loading="eager"
                src="{{ store.logo }}"
                alt="{{ store.name }} logo"
              />
              {% if is_page('index') %}
              <h1 class="sr-only">{{ store.name }}</h1>
              {% else %}
              <h2 class="sr-only">{{ store.name }}</h2>
              {% endif %}
            </a>
          </div>

          <div class="flex items-center my-2.5">
            <div class="flex items-center text-xs gap-4">
              <button
                class="header-btn flex items-center bg-transparent p-0"
                type="button"
                aria-label="toggle-theme"
                onclick="salla.event.dispatch('appearance::toggle')"
              >
                <i class="header-btn__icon sicon-moon text-base"></i>
              </button>

              <button
                class="header-btn flex items-center bg-transparent p-0"
                type="button"
                aria-label="localization"
                onclick="salla.event.dispatch('localization::open')"
              >
                <i class="header-btn__icon sicon-global text-base"></i>
                <span class="ml-1 rtl:ml-0 rtl:mr-1">اللغة</span>
              </button>

              <button
                class="header-btn flex items-center bg-transparent p-0"
                type="button"
                aria-label="search"
                onclick="salla.event.dispatch('search::toggle')"
              >
                <i class="header-btn__icon sicon-search text-base"></i>
                <span class="ml-1 rtl:ml-0 rtl:mr-1">بحث</span>
              </button>

              {% if user.type == 'user' %}
              <salla-user-menu avatar-only show-header></salla-user-menu>
              {% else %}
              <button
                class="header-btn flex items-center bg-transparent p-0"
                aria-label="user-icon"
                type="button"
                onclick="salla.event.dispatch('login::open')"
              >
                <i class="header-btn__icon sicon-user-circle text-base"></i>
                <span class="ml-1 rtl:ml-0 rtl:mr-1">الحساب</span>
              </button>
              {% endif %}

              <salla-cart-summary class="flex items-center">
                <i
                  slot="icon"
                  class="header-btn__icon sicon-shopping-bag text-base"
                ></i>
                <span slot="title" class="ml-1 rtl:ml-0 rtl:mr-1">السلة</span>
              </salla-cart-summary>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

{% if store.settings.is_multilingual or store.settings.currencies_enabled %}
<salla-localization-modal></salla-localization-modal>
{% endif %} {% if store.scope %}
<salla-scopes
  selection="{{ store.scope.display_as == 'popup' ? 'mandatory' : 'optional' }}"
></salla-scopes>
{% endif %} {% block styleheader %}
<style>
  #mainnav.main-nav-container {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    min-height: 78px;
    width: 100%;
    z-index: 50;
    background: #fff;
    height: auto !important; /* يكسر أي height inline من سلة */
  }

  /* لو سلة زودت ارتفاع الهيدر بسبب padding */
  #mainnav.main-nav-container .inner {
    padding-top: 18px;
    padding-bottom: 18px;
  }

  /* توسيط حقيقي في الديسكتوب */
  @media (min-width: 1024px) {
    #mainnav.main-nav-container {
      width: 90% !important;
      top: 38px !important;
      left: 50% !important;
      right: auto !important;
      transform: translateX(-50%);
      border-radius: 16px;
    }
  }

  .header-btn,
  .header-btn__icon {
    border: none !important;
    box-shadow: none !important;
  }
</style>
{% endblock %}
