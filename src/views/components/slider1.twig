<section
  class="s-block s-block--default home-slider s-block--full-bg"
  dir="rtl"
>
  <salla-slider
    auto-play
    pagination
    type="fullwidth"
    class="home-slider__salla"
    dir="rtl"
  >
    <div slot="items">
      {% for banner in component.slider1 %}
      <div
        class="swiper-slide swiper-lazy-wrap relative home-slide js-home-slide"
      >
        <img
          src="{{ banner.image }}"
          alt=""
          class="w-full home-slide__img"
          loading="lazy"
          draggable="false"
        />

        <div
          class="absolute inset-0 container flex items-center justify-start px-8 py-16 lg:px-12 lg:py-20 home-slider__content"
        >
          <div class="w-1/2 sm:w-2/3 lg:w-1/3 home-slide__text">
            <p class="home-slide__sub" style="color:{{ banner.subcolor }};">
              {{ banner.subtitl }}
            </p>

            <h3
              class="home-slide__title"
              style="color:{{ banner.maintextcolor }};"
            >
              {{ banner.title }}
            </h3>

            <p class="home-slide__body" style="color:{{ banner.textcolor }};">
              {{ banner.text }}
            </p>

            {% if banner.link %}
            <a
              href="{{ banner.link }}"
              class="home-slide__btn inline-flex items-center justify-center mt-6 px-6 py-3 no-underline"
              style="background:{{
                banner.backbutton
              }};border-radius:8px;border:1px solid rgba(255,255,255,0.15);color:{{
                banner.buttoncolor
              }};"
            >
              {{ banner.buttontext }}
            </a>
            {% endif %}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </salla-slider>

  <div
    class="home-slider__pagination"
    aria-label="Home slider pagination"
  ></div>
</section>

{% block styleslider %}
<style>
  .home-slider {
    position: relative !important;
    overflow: hidden !important;
  }

  .home-slide {
    min-height: 628px;
    height: var(--home-slide-h, auto);
    user-select: none;
    -webkit-user-select: none;
  }
  @media (min-width: 1024px) {
    .home-slide {
      min-height: 750px;
    }
  }

  .home-slide__img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    pointer-events: none;
  }

  .home-slider .swiper-slide {
    width: 100% !important;
  }
  .home-slider .swiper {
    overflow: hidden !important;
  }

  .home-slider,
  .home-slider .swiper,
  .home-slider .swiper-wrapper {
    direction: rtl !important;
  }

  .home-slider__content,
  .home-slide__text {
    direction: rtl;
    text-align: right;
  }

  .home-slider__content {
    pointer-events: none;
  }
  .home-slide__text,
  .home-slide__btn {
    pointer-events: auto;
  }

  .home-slide__btn {
    margin-left: 0 !important;
    margin-right: auto !important;
  }

  @media (max-width: 639px) {
    .home-slider__content > .home-slide__text {
      width: 50% !important;
      text-align: right !important;
      direction: rtl !important;
    }
    .home-slide__btn {
      padding: 8px 14px !important;
      font-size: 14px !important;
      margin-top: 12px !important;
    }
  }

  .home-slider .swiper-button-next,
  .home-slider .swiper-button-prev,
  .home-slider [class*="swiper-button-"],
  .home-slider .s-slider-nav,
  .home-slider .s-slider__nav,
  .home-slider button[aria-label*="Next"],
  .home-slider button[aria-label*="Prev"],
  .home-slider button[aria-label*="التالي"],
  .home-slider button[aria-label*="السابق"] {
    display: none !important;
    opacity: 0 !important;
    visibility: hidden !important;
    pointer-events: none !important;
  }

  .home-slider__pagination {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 18px;
    z-index: 999;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    pointer-events: auto;
  }

  .home-slider__pagination .p-bullet {
    width: 10px;
    height: 10px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.4);
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .home-slider__pagination .p-bullet.is-active {
    width: 26px;
    height: 10px;
    background: #fff;
    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.25);
  }

  @media (max-width: 639px) {
    .home-slider__pagination {
      bottom: 12px;
      gap: 8px;
    }
  }
</style>
{% endblock %} {% block scriptslider %}
<script>
  (function () {
    function getSwiperInstance(el) {
      if (!el) return null;
      return el.swiper || el._swiper || el.slider?.swiper || null;
    }

    function killParallaxAndWeirdMove(swiper) {
      try {
        swiper.params.parallax = false;
      } catch (e) {}
      try {
        swiper.params.mousewheel = false;
      } catch (e) {}
      try {
        if (
          swiper.mousewheel &&
          typeof swiper.mousewheel.disable === "function"
        )
          swiper.mousewheel.disable();
      } catch (e) {}
      try {
        swiper.params.freeMode = false;
        swiper.params.freeModeMomentum = false;
      } catch (e) {}
      try {
        document
          .querySelectorAll(".home-slider [data-swiper-parallax]")
          .forEach((el) => el.removeAttribute("data-swiper-parallax"));
      } catch (e) {}
    }

    function forceFullSlide(swiper) {
      try {
        swiper.params.slidesPerView = 1;
        swiper.params.slidesPerGroup = 1;
        swiper.params.centeredSlides = false;
        swiper.params.spaceBetween = 0;
        swiper.params.effect = "slide";
      } catch (e) {}
    }

    function buildCustomPagination(swiper, pagerEl) {
      if (!swiper || !pagerEl) return;

      function render() {
        const count = swiper.slides ? swiper.slides.length : 0;
        if (!count) return;

        pagerEl.innerHTML = "";
        for (let i = 0; i < count; i++) {
          const b = document.createElement("span");
          b.className =
            "p-bullet" + (i === swiper.realIndex ? " is-active" : "");
          b.setAttribute("role", "button");
          b.setAttribute("tabindex", "0");
          b.addEventListener("click", () => {
            if (typeof swiper.slideToLoop === "function") swiper.slideToLoop(i);
            else swiper.slideTo(i);
          });
          pagerEl.appendChild(b);
        }
      }

      function setActive() {
        const bullets = pagerEl.querySelectorAll(".p-bullet");
        bullets.forEach((b, idx) =>
          b.classList.toggle("is-active", idx === swiper.realIndex)
        );
      }

      render();
      setActive();

      swiper.on("slideChange", setActive);
      swiper.on("resize", () => {
        render();
        setActive();
      });
    }

    function applyAll() {
      const sallaEl = document.querySelector(".home-slider salla-slider");
      const pagerEl = document.querySelector(
        ".home-slider .home-slider__pagination"
      );
      const swiper = getSwiperInstance(sallaEl);
      if (!swiper) return false;

      try {
        if (typeof swiper.changeLanguageDirection === "function")
          swiper.changeLanguageDirection("rtl");
      } catch (e) {}

      forceFullSlide(swiper);
      killParallaxAndWeirdMove(swiper);

      buildCustomPagination(swiper, pagerEl);

      try {
        swiper.update();
        swiper.updateSlides();
        swiper.updateSize();
      } catch (e) {}
      return true;
    }

    window.addEventListener("load", () => {
      let tries = 0;
      const t = setInterval(() => {
        tries++;
        const ok = applyAll();
        if (ok || tries >= 30) clearInterval(t);
      }, 200);
    });
  })();
</script>
{% endblock %}
